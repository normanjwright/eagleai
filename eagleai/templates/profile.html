{% extends 'base.html' %} 
{% block title %}Profile{% endblock %} 
{% block content %} 



    <div class="container-fluid" >

            <div class="container">
                <div class="box">
                    <h3> {{studentname}} </h3>
                    <h5> {{student.grad_year}} </h5>
                    <h5> {{studentsch}} </h5>
                    
                </div>
                <div class="box">
                    <h3>Programs</h3>
                    <ul>
                        <h5> Majors: </h5>
                        {% for major in studentMaj %}
                            <li>{{ major }}</li>
                        {% endfor %}
                        
                        
                        <h5 style="margin-top: 20px;">Minors: </h5>
                        {% for minor in studentMin %}
                            <li>{{ minor }}</li>
                        {% endfor %}
                    </ul>
                </div>
                <div class="box">
                    <h3>What if?</h3>
                
                        <select id="courseDept" name="courseDept" class="form-select mx-2" style="max-height: 70vh; overflow:scroll;max-width:125px;">
                            <option selected>Major</option>
                            {% for dept in departments %}
                                <option>{{ dept }}</option>
                            {% endfor %}
                        </select>
                        
                        <select id="courseDept" name="courseDept" class="form-select mx-2" style="max-height: 70vh; overflow:scroll;max-width:125px;">
                            <option selected>Minor</option>
                            {% for dept in departments %}
                                <option>{{ dept }}</option>
                            {% endfor %}
                        </select>

                           
                          <a href="url">Restore Declared Programs</a>
                          <a href="url">Restore Classes Taken</a> 
                    </div>
                    
                </div>
            </div>

            <div class="container mt-5">
                <h2>Add Courses</h2>
                <form id="dynamicForm">
                    <select name="Semester" id="semester">
                        <option value="Freshman Fall">Freshman Fall</option>
                        <option value="Freshman Spring">Freshman Spring</option>
                        <option value="Freshman Summer">Freshman Summer</option>
                        <option value="Sophomore Fall">Sophomore Fall</option>
                        <option value="Sophomore Spring">Sophomore Spring</option>
                        <option value="Sophomore Summer">Sophomore Summer</option>
                        <option value="Junior Fall">Junior Fall</option>
                        <option value="Junior Spring">Junior Spring</option>
                        <option value="Junior Summer">Junior Summer</option>
                        <option value="Senior Fall">Senior Fall</option>
                        <option value="Senior Spring">Senior Spring</option>
                      </select>

                    <div class="form-group">
                        <label for="item1">Course 1:</label>
                        <input type="text" id="course1" name="courses[]" class="form-control mx-2" placeholder="Enter course">
                       
                       
                    </div>
                    <button type="button" class="btn btn-primary" onclick="addItem()">Add More</button>
                    <button type="submit" class="btn btn-success">Update</button>
                </form>
            </div>

            
            <script>
                let itemCount = 1;
            
                function addItem() {
                    itemCount++;
                    const form = document.getElementById('dynamicForm');
                    const newItem = document.createElement('div');
                    newItem.className = 'form-group';
                    newItem.innerHTML = `
                        <label for="item${itemCount}">Course ${itemCount}:</label>
                        <input type="text" class="form-control" id="Course${itemCount}" name="items[]">
                    `;
                    form.insertBefore(newItem, form.lastElementChild.previousElementSibling);
                }
               

                function updateCourses() {
                    const department = document.getElementById('courseDept').value;
                    const courseList = document.getElementById('courseList');
                    courseList.innerHTML = '<option selected>Loading...</option>';

                    fetch(`/get_courses/${department}`)
                        .then(response => response.json())
                        .then(data => {
                            courseList.innerHTML = '<option selected>Course</option>';
                            data.forEach(course => {
                                const option = document.createElement('option');
                                option.value = course;
                                option.textContent = course;
                                courseList.appendChild(option);
                            });
                        });
                }


            </script>



            <div class="bottom-container">
                <div class="bottom-box">
                    <h4 class="font-weight-bold">Freshman Year</h3>
                    <h5 class="font-weight-bold">Fall</h5>
                    {% for course in student.academic_record["Freshman Fall"] %}
                    <p>{{ course }} 
                        <button type="button" class="btn-close btn-sm btn-red delete-course" 
                        data-course="{{ course }}" aria-label="Close">x</button></p>
                    {% endfor %}
                    <h5 class="font-weight-bold">Freshman</h5>
                        {% for course in student.academic_record["Freshman Spring"] %}
                        <p>{{ course }}</p>
                        {% endfor %}
                    <h5 class="font-weight-bold"> Summer</h5>
                        {% for course in student.academic_record["Freshman Summer"] %}
                        <p>{{ course }}</p>
                        {% endfor %}
                </div>
            
                <!-- Button dropdowns -->

                
                <div class="bottom-box">
                    <h4 class="font-weight-bold">Sophomore Year</h3>
                    <h5 class="font-weight-bold">Fall</h5>
                    {% for course in student.academic_record["Sophomore Fall"] %}
                    <p>{{ course }}</p>
                    {% endfor %}
                    <h5 class="font-weight-bold">Freshman</h5>
                        {% for course in student.academic_record["Sophomore Spring"] %}
                        <p>{{ course }}</p>
                        {% endfor %}
                    <h5 class="font-weight-bold"> Summer</h5>
                        {% for course in student.academic_record["Sophomore Summer"] %}
                        <p>{{ course }}</p>
                        {% endfor %}
                </div>


                <div class="bottom-box">
                    <h4 class="font-weight-bold">Junior Year</h3>
                    <h5 class="font-weight-bold">Fall</h5>
                    {% for course in student.academic_record["Junior Fall"] %}
                    <p>{{ course }}</p>
                    {% endfor %}
                    <h5 class="font-weight-bold">Freshman</h5>
                        {% for course in student.academic_record["Junior Spring"] %}
                        <p>{{ course }}</p>
                        {% endfor %}
                    <h5 class="font-weight-bold"> Summer</h5>
                        {% for course in student.academic_record["Junior Summer"] %}
                        <p>{{ course }}</p>
                        {% endfor %}
                </div>
                <div class="bottom-box">
                    <h4 class="font-weight-bold">Senior Year</h3>
                    <h5 class="font-weight-bold">Fall</h5>
                    {% for course in student.academic_record["Senior Fall"] %}
                    <p>{{ course }}</p>
                    {% endfor %}
                    <h5 class="font-weight-bold">Freshman</h5>
                        {% for course in student.academic_record["Senior Spring"] %}
                        <p>{{ course }}</p>
                        {% endfor %}
                    <h5 class="font-weight-bold"> Summer</h5>
                        {% for course in student.academic_record["Senior Summer"] %}
                        <p>{{ course }}</p>
                        {% endfor %}
                </div>
            </div>
            <script>
                $(document).ready(function() {
                    $(".delete-course").click(function() {
                        var course = $(this).data("course");
                        var button = $(this);
            
                        $.ajax({
                            type: "POST",
                            url: "/delete_course",
                            data: { course: course },
                            success: function(response) {
                                window.location.reload(); // Reload the page to see the updated list
                            },
                            error: function(error) {
                                console.error("Error deleting course:", error);
                            }
                        });
                    });
                });
            </script>
    </div>
{% endblock %}
